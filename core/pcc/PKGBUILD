# Contributor: Andreas Baumann <abaumann@yahoo.com>

pkgname=pcc
pkgver=1.0.0
pkgrel=4
pkgdesc="A Portable C Compiler."
arch=('i686' 'x86_64')
url="http://pcc.ludd.ltu.se/"
license=('custom')
makedepends=()
depends=('pcc-libs>=1.0.0')
source=(ftp://pcc.ludd.ltu.se/pub/pcc-releases/${pkgname}-${pkgver}.tgz
        license
        no_dynamic.diff)

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  patch -p 1 < ../no_dynamic.diff

  ./configure --prefix=/usr || return 1

  make || return 1
}

package(){
  cd ${srcdir}/${pkgname}-${pkgver}

  make DESTDIR=$pkgdir install || return 1

  mv ${pkgdir}/usr/share/man/man1/cpp.1 ${pkgdir}/usr/share/man/man1/pcpp.1

  install -D -m0644 ${srcdir}/license ${pkgdir}/usr/share/licenses/pcc/license
}

sha1sums=('a994d6bf75ae81add70d35478b59fca7c63bd5df'
          '47cf7cca69caf4d600eb5a2d45a1e36623948025'
          'fc42394a415fde57332d2e0b52542fe870a3b55a')
